(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{544:function(e,t,o){e.exports=o.p+"assets/img/1-boot-efi.853f625b.png"},545:function(e,t,o){e.exports=o.p+"assets/img/2-kernel-start.e0572033.png"},546:function(e,t,o){e.exports=o.p+"assets/img/5-apfs-module.b0425a3e.png"},547:function(e,t,o){e.exports=o.p+"assets/img/6-USB-setup.ba302241.png"},548:function(e,t,o){e.exports=o.p+"assets/img/8-dsmos-arrived.847041e0.png"},549:function(e,t,o){e.exports=o.p+"assets/img/9-audio.6e453f41.png"},550:function(e,t,o){e.exports=o.p+"assets/img/10-GPU.8e1643f9.png"},551:function(e,t,o){e.exports=o.p+"assets/img/11-boot.b02845ce.png"},662:function(e,t,o){"use strict";o.r(t);var s=o(24),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"понимание-процесса-загрузки-macos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#понимание-процесса-загрузки-macos"}},[e._v("#")]),e._v(" Понимание процесса загрузки macOS")]),e._v(" "),s("ul",[s("li",[e._v("Поддерживаемая версия: 0.6.8")])]),e._v(" "),s("p",[e._v("Итак, при устранении неполадок в хакинтоше, может быть немного сложно понять, "),s("em",[e._v("где")]),e._v(" вы именно застряли, поскольку точное ключевое слово по которому вы пытаетесь найти, может не совпадать с чем-либо в Google. Хотя эта страница не решит всех ваших проблем, по крайней мере, она должна помочь понять, где в процессе загрузки macOS вы застреваете, и надеемся, подскажет, по какой причине вы застряли.")]),e._v(" "),s("h2",{attrs:{id:"загрузка-opencore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#загрузка-opencore"}},[e._v("#")]),e._v(" Загрузка OpenCore")]),e._v(" "),s("p",[e._v("Этот раздел будет кратким, так как проблемы с загрузкой OpenCore довольно редки и обычно являются простой ошибкой пользователя:")]),e._v(" "),s("ul",[s("li",[e._v("Включение системы и поиск загрузочных устройств")]),e._v(" "),s("li",[e._v("Система находит BOOTx64.efi на вашем USB-накопителе с OpenCore в EFI/BOOT/")]),e._v(" "),s("li",[e._v("Загружается BOOTx64.efi, который потом по цепочке загружает OpenCore.efi из EFI/OC/")]),e._v(" "),s("li",[e._v("Применяются свойства NVRAM")]),e._v(" "),s("li",[e._v("EFI драйверы загружаются из EFI/OC/Drivers")]),e._v(" "),s("li",[e._v("Устанавливается Graphics Output Protocol(GOP)")]),e._v(" "),s("li",[e._v("Загружаются ACPI таблицы из EFI/OC/ACPI")]),e._v(" "),s("li",[e._v("Применяются данные SMBIOS")]),e._v(" "),s("li",[e._v("OpenCore загружает и показывает вам все возможные варианты загрузки")]),e._v(" "),s("li",[e._v("Теперь вы загружаетесь в установщик macOS")])]),e._v(" "),s("p",[e._v("Если на этом этапе у вас возникли проблемы с загрузкой, главное, что нужно проверить:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/opencore-issues.html#зависает-на-no-vault-provided"}},[e._v("Зависает на "),s("code",[e._v("no vault provided!")])])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/opencore-issues.html#не-отображаются-разделы-с-macos"}},[e._v("Не отображаются разделы с macOS")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/opencore-issues.html#при-загрузке-opencore-происходит-перезагрузка-в-bios"}},[e._v("При загрузке OpenCore - происходит перезагрузка в BIOS")])],1)]),e._v(" "),s("p",[e._v("Об остальных возможных проблемах, смотрите здесь:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/opencore-issues.html"}},[e._v("Проблемы с загрузкой OpenCore")])],1)]),e._v(" "),s("h2",{attrs:{id:"boot-efi-handoff"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#boot-efi-handoff"}},[e._v("#")]),e._v(" boot.efi Handoff")]),e._v(" "),s("p",[s("img",{attrs:{src:o(544),alt:""}})]),e._v(" "),s("p",[e._v("Здесь выходит на сцену загрузчик macOS(boot.efi), в частности, то, что он делает - подготавливает среду для загрузки ядра, где OpenCore и инжектирует кексты. Если вы застряли на этом этапе, скорее всего, проблема с загрузкой ядра. Основные виновники:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#зависает-на-endrandomseed"}},[e._v("Зависает на EndRandomSeed")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#зависает-на-eb-log-exitbs-start"}},[e._v("Зависает на "),s("code",[e._v("[EB|#LOG:EXITBS:START]")])])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#ошибки-couldn-t-allocate-runtime-area"}},[e._v("Ошибки "),s("code",[e._v("Couldn't allocate runtime area")])])],1)]),e._v(" "),s("p",[e._v("Об остальных возможных проблемах, смотрите здесь:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html"}},[e._v("Проблемы с ядром")])],1)]),e._v(" "),s("p",[s("strong",[e._v("Примечание")]),e._v(": В macOS 10.15.4, Apple изменила протокол отладки boot.efi, поэтому всё будет выглядеть несколько иначе, чем раньше, но все те же правила по-прежнему применяются")]),e._v(" "),s("h2",{attrs:{id:"xnu-kernel-handoff"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xnu-kernel-handoff"}},[e._v("#")]),e._v(" XNU/Kernel Handoff")]),e._v(" "),s("p",[e._v("Теперь, когда boot.efi всё настроил для нас, мы можем понаблюдать, как ядро делает свое дело. Этот раздел обычно называют "),s("a",{attrs:{href:"https://developer.apple.com/library/archive/documentation/Darwin/Conceptual/KernelProgramming/booting/booting.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Этапом укоренения (Rooting phase)"),s("OutboundLink")],1),e._v(":")]),e._v(" "),s("p",[s("img",{attrs:{src:o(545),alt:""}})]),e._v(" "),s("p",[e._v("В этом разделе проверяются данные SMBIOS, загружаются ACPI таблицы/Кексты, и macOS пытается привести всё в порядок. Обычно ошибки возникают в результате:")]),e._v(" "),s("ul",[s("li",[e._v("Поврежденные SSDT")]),e._v(" "),s("li",[e._v("Поврежденные кексты(или неправильно настроенные в вашем config.plist -> Kernel -> Add)")]),e._v(" "),s("li",[e._v("Испорченная Memory Map")])]),e._v(" "),s("p",[e._v("Подробнее об устранении неполадок см. здесь:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#паника-ядра-на-cannot-perform-kext-summary"}},[e._v("Паника ядра на "),s("code",[e._v("Cannot perform kext summary")])])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#паника-ядра-на-invalid-frame-pointer"}},[e._v("Паника ядра на "),s("code",[e._v("Invalid frame pointer")])])],1)]),e._v(" "),s("p",[s("img",{attrs:{src:o(546),alt:""}})]),e._v(" "),s("p",[e._v("Здесь теперь у нас "),s("code",[e._v("[ PCI configurations begin ]")]),e._v(" (прим. пер. - Начало конфигурации PCI), этот раздел можно рассматривать как тест аппаратной части наших систем, кекстов и SSDT, которые мы инжектировали, и где IOKit запускает аппаратные пробы для поиска устройств для подключения.")]),e._v(" "),s("p",[e._v("Основное, что здесь проверяется:")]),e._v(" "),s("ul",[s("li",[e._v("Встроенные контроллеры (EC)")]),e._v(" "),s("li",[e._v("Хранилище(NVMe, SATA, т.д.)")]),e._v(" "),s("li",[e._v("PCI/e")]),e._v(" "),s("li",[e._v("NVRAM")]),e._v(" "),s("li",[e._v("RTC")]),e._v(" "),s("li",[e._v("PS2 и I2C")])]),e._v(" "),s("p",[e._v("Более подробную информацию о том, как обойти эту область, смотрите здесь:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#зависает-на-rtc-pci-configuration-begins-previous-shutdown-hpet-hid-legacy"}},[e._v("Зависает на "),s("code",[e._v("RTC...")]),e._v(", "),s("code",[e._v("PCI Configuration Begins")]),e._v(", "),s("code",[e._v("Previous Shutdown...")]),e._v(", "),s("code",[e._v("HPET")]),e._v(", "),s("code",[e._v("HID: Legacy...")])])],1)]),e._v(" "),s("p",[s("img",{attrs:{src:o(547),alt:""}})]),e._v(" "),s("p",[e._v('Здесь вступает в игру ограничение в 15 портов и USB Mapping, а также появляются печально известные ошибки "Waiting for Root Device". Основные вещи, которые необходимо проверить:')]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#waiting-for-root-device-или-ошибка-запрещающего-знака"}},[e._v('"Waiting for Root Device" или ошибка запрещающего знака')])],1)]),e._v(" "),s("p",[s("img",{attrs:{src:o(548),alt:""}})]),e._v(" "),s("p",[e._v("А здесь выходят на сцену наши FakeSMC/VirtualSMC и творят свои чудеса, сам по себе DSMOS это кекст, который проверяет, есть ли в вашей системе SMC и запрашивает ключ. Если этот ключ отсутствует, DSMOS не расшифрует остальные бинарные файлы, и вы застрянете здесь. Также вы можете застрять на AppleACPICPU, что является точно такой же ошибкой.")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#kextd-stall-0-appleacpicpu"}},[e._v("kextd stall[0]: AppleACPICPU")])],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Your karma check for today:\nThere once was a user that whined\nhis existing OS was so blind,\nhe'd do better to pirate an OS that ran great\nbut found his hardware declined.\nPlease don't steal Mac OS!\nReally, that's way uncool.\n(C) Apple Computer, Inc.\n")])])]),s("p",[e._v("Источник: Dont Steal Mac OS X.kext")]),e._v(" "),s("p",[s("img",{attrs:{src:o(549),alt:""}})]),e._v(" "),s("p",[e._v("А вот тут и вступает аудиодрайвер Apple, и здесь AppleALC сияет. Обычно здесь редко можно увидеть проблемы, но если вы их увидите, попробуйте отключить AppleALC и любые другие кексты, связанные со звуком.")]),e._v(" "),s("p",[s("img",{attrs:{src:o(550),alt:""}})]),e._v(" "),s("p",[e._v("И здесь мы подбираемся к инициализации драйвера графического процессора, и где WhateverGreen тоже творит свою магию. Обычно, ошибки здесь связаны с графическим процессором, а не с самим WhateverGreen. Основные виновники:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#зависает-на-или-рядом-с-ioconsoleusers-gioscreenlock-giolockstate-3"}},[e._v("Зависает на или рядом с "),s("code",[e._v("IOConsoleUsers: gIOScreenLock...")])])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#black-screen-after-ioconsoleusers-gioscreenlock-on-navi"}},[e._v("Черный экран после "),s("code",[e._v("IOConsoleUsers: gIOScreenLock...")]),e._v(" на Navi")])],1)]),e._v(" "),s("h2",{attrs:{id:"macos-handoff"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#macos-handoff"}},[e._v("#")]),e._v(" macOS Handoff")]),e._v(" "),s("p",[s("img",{attrs:{src:o(551),alt:""}})]),e._v(" "),s("p",[e._v("И наконец-то вы преодолели всю эту многословность! Если вы застряли на логотипе Apple после Verbose, то есть пара вещей, которые нужно проверить:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#macos-зависает-перед-входом-в-систему"}},[e._v("macOS зависает перед входом в систему")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/kernel-issues.html#черныи-экран-после-ioconsoleusers-gioscreenlock-на-navi"}},[e._v("Черный экран после "),s("code",[e._v("IOConsoleUsers: gIOScreenLock...")]),e._v(" на Navi")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/troubleshooting/extended/userspace-issues.html#зависает-в-установщике-macos-по-прошествию-30-секунд"}},[e._v("Зависает в установщике macOS после 30 секунд")])],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);